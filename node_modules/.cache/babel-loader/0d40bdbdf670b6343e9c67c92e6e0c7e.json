{"ast":null,"code":"import _toConsumableArray from \"D:/\\u524D\\u7AEF/Myzhihu/zhihu/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport { mixin } from '../mixin';\nexport default {\n  name: 'InfiniteScroll',\n  data: function data() {\n    return {\n      story: {},\n      data: '',\n      loading: false\n    };\n  },\n  mixins: [mixin],\n  methods: {\n    loadMore: function loadMore() {\n      var _this = this;\n\n      this.loading = true;\n      this.$nextTick(function () {\n        axios.get('api/4/news/before/' + --_this.data).then(function (response) {\n          var _this$story;\n\n          var s = response.data.stories;\n\n          (_this$story = _this.story).push.apply(_this$story, _toConsumableArray(s));\n\n          console.log(s);\n          _this.loading = false;\n        }).catch(function (error) {\n          console.log(error);\n        }); // setTimeout(()=>{\n        //     console.log(111);\n        //     this.loading = false;\n        // },1000)\n      });\n    }\n  },\n  created: function created() {\n    var _this2 = this;\n\n    axios.get('api/4/news/latest').then(function (response) {\n      _this2.story = response.data.stories;\n      _this2.date = new Date();\n      console.log(_this2.story);\n    }).catch(function (error) {// console.log(error)\n    }); // console.log(this.story);\n  },\n  beforeDestroy: function beforeDestroy() {\n    console.log('InfiniteScroll will be destroied');\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;EACAA,sBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,SADA;MAEAD,QAFA;MAGAE;IAHA;EAKA,CARA;EASAC,eATA;EAUAC;IACAC,QADA,sBACA;MAAA;;MACA;MACA;QACAC;UAAA;;UACA;;UACA;;UACAC;UACA;QACA,CALA,EAMAC,KANA,CAMA;UACAD;QACA,CARA,EADA,CAUA;QACA;QACA;QACA;MACA,CAdA;IAgBA;EAnBA,CAVA;EA+BAE,OA/BA,qBA+BA;IAAA;;IAEAH;MACA;MACA;MACAC;IACA,CAJA,EAKAC,KALA,CAKA,kBACA;IACA,CAPA,EAFA,CAUA;EACA,CA1CA;EA2CAE,aA3CA,2BA2CA;IACAH;EACA;AA7CA","names":["name","data","story","loading","mixins","methods","loadMore","axios","console","catch","created","beforeDestroy"],"sourceRoot":"src/components","sources":["InfiniteScroll.vue"],"sourcesContent":["<template>\r\n        <ul\r\n        v-infinite-scroll=\"loadMore\"\r\n        :infinite-scroll-disabled=\"loading\"\r\n        infinite-scroll-immediate-check=\"false\"\r\n        infinite-scroll-distance=\"10\">\r\n            <li v-for=\"item in story\" :key=\"item.id\" @click=\"viewDetail(item.id)\">\r\n            <div class=\"msg\">\r\n                <div class=\"story_title\">{{item.title}}</div>\r\n                <div class=\"story_hint\">{{item.hint}}</div>\r\n            </div>\r\n            <img :src=\"item.images[0]\" alt=\"\">\r\n            </li>\r\n        </ul> \r\n\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport {mixin} from '../mixin'\r\nexport default {\r\n    name:'InfiniteScroll',\r\n    data () {\r\n        return {\r\n            story:{},\r\n            data:'',\r\n            loading:false\r\n        }\r\n    },\r\n    mixins:[mixin],\r\n    methods: {\r\n        loadMore() {\r\n            this.loading = true;\r\n             this.$nextTick(()=>{\r\n                axios.get('api/4/news/before/'+(--this.data)).then(response => {\r\n                let s = response.data.stories\r\n                this.story.push(...s)\r\n                console.log(s);\r\n                this.loading = false;\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                })\r\n                // setTimeout(()=>{\r\n                //     console.log(111);\r\n                //     this.loading = false;\r\n                // },1000)\r\n             })\r\n\r\n            }\r\n    },\r\n    created() {\r\n        \r\n        axios.get('api/4/news/latest').then(response => {\r\n            this.story = response.data.stories\r\n            this.date = new Date()\r\n            console.log(this.story);\r\n        })\r\n        .catch(error => {\r\n            // console.log(error)\r\n        })\r\n        // console.log(this.story);\r\n    },\r\n    beforeDestroy() {\r\n        console.log('InfiniteScroll will be destroied')\r\n    },\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n\r\nul{\r\n    // overflow-x: hidden;\r\n    li{\r\n        width: 100%;\r\n        height: 1rem;\r\n        font-size: 0.2rem;\r\n        display: flex;\r\n\r\n        .msg{\r\n\r\n            width: 2.74rem;\r\n            height: 1rem;\r\n            .story_title{\r\n                font-size: 0.16rem;\r\n                line-height: 0.16rem;\r\n                margin: 0.1rem;\r\n                margin-top: 0.2rem;\r\n            }\r\n            .story_hint{\r\n                margin-top: 0.2rem;\r\n                margin-left: 0.1rem;\r\n                font-size: 0.12rem;\r\n                line-height: 0.12rem;\r\n                color: rgb(96, 94, 94);\r\n            }\r\n        }\r\n        img{\r\n            width: 0.7rem;\r\n            height: 0.7rem;\r\n            margin:0.16rem;\r\n        }\r\n    }    \r\n}\r\n\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}