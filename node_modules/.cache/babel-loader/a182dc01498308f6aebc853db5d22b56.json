{"ast":null,"code":"'use strict';\n\nvar _typeof = require(\"D:/\\u524D\\u7AEF/Myzhihu/zhihu/node_modules/@babel/runtime/helpers/typeof.js\").default;\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nvar lodash = require('lodash');\n\nvar isPromise = require('is-promise');\n\nmodule.exports = function (adapter) {\n  if (_typeof(adapter) !== 'object') {\n    throw new Error('An adapter must be provided, see https://github.com/typicode/lowdb/#usage');\n  } // Create a fresh copy of lodash\n\n\n  var _ = lodash.runInContext();\n\n  var db = _.chain({}); // Add write function to lodash\n  // Calls save before returning result\n\n\n  _.prototype.write = _.wrap(_.prototype.value, function (func) {\n    var funcRes = func.apply(this);\n    return db.write(funcRes);\n  });\n\n  function plant(state) {\n    db.__wrapped__ = state;\n    return db;\n  } // Lowdb API\n  // Expose _ for mixins\n\n\n  db._ = _;\n\n  db.read = function () {\n    var r = adapter.read();\n    return isPromise(r) ? r.then(plant) : plant(r);\n  };\n\n  db.write = function (returnValue) {\n    var w = adapter.write(db.getState());\n    return isPromise(w) ? w.then(function () {\n      return returnValue;\n    }) : returnValue;\n  };\n\n  db.getState = function () {\n    return db.__wrapped__;\n  };\n\n  db.setState = function (state) {\n    return plant(state);\n  };\n\n  return db.read();\n};","map":{"version":3,"names":["lodash","require","isPromise","module","exports","adapter","Error","_","runInContext","db","chain","prototype","write","wrap","value","func","funcRes","apply","plant","state","__wrapped__","read","r","then","returnValue","w","getState","setState"],"sources":["D:/前端/Myzhihu/zhihu/node_modules/lowdb/lib/main.js"],"sourcesContent":["'use strict';\n\nvar lodash = require('lodash');\nvar isPromise = require('is-promise');\n\nmodule.exports = function (adapter) {\n  if (typeof adapter !== 'object') {\n    throw new Error('An adapter must be provided, see https://github.com/typicode/lowdb/#usage');\n  }\n\n  // Create a fresh copy of lodash\n  var _ = lodash.runInContext();\n  var db = _.chain({});\n\n  // Add write function to lodash\n  // Calls save before returning result\n  _.prototype.write = _.wrap(_.prototype.value, function (func) {\n    var funcRes = func.apply(this);\n    return db.write(funcRes);\n  });\n\n  function plant(state) {\n    db.__wrapped__ = state;\n    return db;\n  }\n\n  // Lowdb API\n  // Expose _ for mixins\n  db._ = _;\n\n  db.read = function () {\n    var r = adapter.read();\n    return isPromise(r) ? r.then(plant) : plant(r);\n  };\n\n  db.write = function (returnValue) {\n    var w = adapter.write(db.getState());\n    return isPromise(w) ? w.then(function () {\n      return returnValue;\n    }) : returnValue;\n  };\n\n  db.getState = function () {\n    return db.__wrapped__;\n  };\n\n  db.setState = function (state) {\n    return plant(state);\n  };\n\n  return db.read();\n};"],"mappings":"AAAA;;;;;;AAEA,IAAIA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAApB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,YAAD,CAAvB;;AAEAE,MAAM,CAACC,OAAP,GAAiB,UAAUC,OAAV,EAAmB;EAClC,IAAI,QAAOA,OAAP,MAAmB,QAAvB,EAAiC;IAC/B,MAAM,IAAIC,KAAJ,CAAU,2EAAV,CAAN;EACD,CAHiC,CAKlC;;;EACA,IAAIC,CAAC,GAAGP,MAAM,CAACQ,YAAP,EAAR;;EACA,IAAIC,EAAE,GAAGF,CAAC,CAACG,KAAF,CAAQ,EAAR,CAAT,CAPkC,CASlC;EACA;;;EACAH,CAAC,CAACI,SAAF,CAAYC,KAAZ,GAAoBL,CAAC,CAACM,IAAF,CAAON,CAAC,CAACI,SAAF,CAAYG,KAAnB,EAA0B,UAAUC,IAAV,EAAgB;IAC5D,IAAIC,OAAO,GAAGD,IAAI,CAACE,KAAL,CAAW,IAAX,CAAd;IACA,OAAOR,EAAE,CAACG,KAAH,CAASI,OAAT,CAAP;EACD,CAHmB,CAApB;;EAKA,SAASE,KAAT,CAAeC,KAAf,EAAsB;IACpBV,EAAE,CAACW,WAAH,GAAiBD,KAAjB;IACA,OAAOV,EAAP;EACD,CAnBiC,CAqBlC;EACA;;;EACAA,EAAE,CAACF,CAAH,GAAOA,CAAP;;EAEAE,EAAE,CAACY,IAAH,GAAU,YAAY;IACpB,IAAIC,CAAC,GAAGjB,OAAO,CAACgB,IAAR,EAAR;IACA,OAAOnB,SAAS,CAACoB,CAAD,CAAT,GAAeA,CAAC,CAACC,IAAF,CAAOL,KAAP,CAAf,GAA+BA,KAAK,CAACI,CAAD,CAA3C;EACD,CAHD;;EAKAb,EAAE,CAACG,KAAH,GAAW,UAAUY,WAAV,EAAuB;IAChC,IAAIC,CAAC,GAAGpB,OAAO,CAACO,KAAR,CAAcH,EAAE,CAACiB,QAAH,EAAd,CAAR;IACA,OAAOxB,SAAS,CAACuB,CAAD,CAAT,GAAeA,CAAC,CAACF,IAAF,CAAO,YAAY;MACvC,OAAOC,WAAP;IACD,CAFqB,CAAf,GAEFA,WAFL;EAGD,CALD;;EAOAf,EAAE,CAACiB,QAAH,GAAc,YAAY;IACxB,OAAOjB,EAAE,CAACW,WAAV;EACD,CAFD;;EAIAX,EAAE,CAACkB,QAAH,GAAc,UAAUR,KAAV,EAAiB;IAC7B,OAAOD,KAAK,CAACC,KAAD,CAAZ;EACD,CAFD;;EAIA,OAAOV,EAAE,CAACY,IAAH,EAAP;AACD,CA9CD"},"metadata":{},"sourceType":"script"}